<!DOCTYPE html>
<html class="no-js">
<head lang="en">

    <#include "../head_import.html" />

</head>
<body>
<#include "../include/top_nav.html">
    <div class="am-cf admin-main">

        <!-- sidebar start -->
        <#include "../adspace/left.html">
            <!-- sidebar end -->
            <!-- content start-->
            <div class="admin-content">
                <div class="am-cf am-padding">
                    <div class="am-fl am-cf"><@s.m "global.position"/>: 扩展属性  - <@s.m "global.add"/></div>
                </div>
                <div class="am-g">
                    <div class="am-u-sm-12 am-u-sm-centered">
                        <form class="ropt">
                            <input type="submit" value="<@s.m "global.backToList"/>" onclick="this.form.action='v_list.do';"/>
                        </form>
                        <div class="clear"></div>
                    </div>
                </div>
                <div class="am-g">
                    <div class="am-u-sm-12 am-u-sm-centered">
                        <@p.form id="baseForm" action="o_save.do">
                        <@p.text label="名称" colspan="1" width="50" name="name" required="true" class="required" maxlength="100"/>
                        <@p.text label="字段名称" colspan="1" width="50" name="field" required="true" class="required" maxlength="100"/><@p.tr/>
                        <@p.select  label="数据类型" colspan="1" width="50"  name="dataType" required="true" list={"1":"下拉列表","2":"单选框"} />
                        <@p.text label="排序"  colspan="2" width="100" name="priority" value="10" required="true" class="required digits" maxlength="10"/><@p.tr/>
                        <@p.checkboxlist label="关联商品类型" colspan="2" width="100" name="typeIds" list=ptList listKey="id" listValue="name" required="true" class="required"/><@p.tr/>
                        <@p.td colspan="2">
                        <div class="items">
                            &nbsp; <input type="button" value="增加属性值" onclick="addLines();"/>
                        </div>
                        <div id="itemsContainer">
                        </div>
                    </@p.td><@p.tr/>
                    <@p.td colspan="2" width="100"><@p.submit code="global.submit"/> &nbsp; <@p.reset code="global.reset"/></@p.td>
            </@p.form>
            </div>
    </div>
    <div class="am-g">
        <div class="am-u-sm-12 am-u-sm-centered">
            <textarea id="itemTpl" style="display:none;">
                <div class="items">
                    属性值 : <input type="text" name="itemName" style="width:200px"/>
                    &nbsp; <input class="del-button" type="button" value="<@s.m "global.delete"/>" onclick="$(this).parent().remove();"/>
                </div>
            </textarea>
        </div>
    </div>

    </div>

    </div>

<script type="text/javascript">
$(function() {
	$("#color").colorPicker();
	$("#baseForm").validate();
});

var tpl = $.format($("#itemTpl").val());
var index = 1;
function addLines() {
	$("#itemsContainer").append(tpl(index++));
	$("#itemColor"+(index-1)).colorPicker();
}
</script>
</body>
</html>